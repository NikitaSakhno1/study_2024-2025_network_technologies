РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ

**Факультет физико-математических и естественных наук**

**Кафедра прикладной информатики и теории вероятностей**

ОТЧЕТ

по лабораторной работе №6

дисциплина: Сетевые технологии

Студент: Сахно Никита

Группа: НФИбд-02-23

**МОСКВА**

2025 г.

**Цель:**

Изучить принципы распределения и настройки адресного пространства на устройствах сети.

**Задания:**

1.  Разбиение сети на подсети
2.  Настройка двойного стека адресации IPv4 и IPv6 в локальной сети
3.  Задание для самостоятельного выполнения

**Выполнение лабораторной работа:**

**№1**

**Разбиение IPv4-сети на подсети**

1.  Задана IPv4-сеть 172.16.20.0/24. Для заданной сети определим

префикс, маску, broadcast-адрес, число возможных подсетей, диапазон адресов узлов.

|     |     |
| --- | --- |
| Характеристика | Значение |
| Адрес сети<br><br>Префикс маски<br><br>Маска<br><br>Broadcast-адрес<br><br>Адрес сети в двоичной форме<br><br>Маска в двоичной форме<br><br>Число возможных подсетей<br><br>Диапазон адресов узлов | 172.16.20.0/24<br><br>/24<br><br>255.255.255.0<br><br>172.16.20.255/24<br><br>10101100.00010000.00010100.00000000<br><br>11111111.11111111.11111111.00000000<br><br>2^8 = 256<br><br>172.16.20.1 - 172.16.20.254 |

Разобьем сеть на 3 подсети с максимально возможным числом адресов узлов 126, 62, 62 соответственно:

Для первой подсети требуется 128 адресов (1 для адреса сети и 1 для широковещательного адреса). Для такого количества адресов маска подсети будет: 255.255.255.128 (префикс маски /25). Диапазон адресов будет: 172.16.20.1–172.16.20.126. Широковещательный адрес: 172.16.20.127.

Для следующих двух подсетей нам нужно 62 + 2 = 64 адресов. Для такого количества адресов маска подсети будет: 255.255.255.192 (префикс маски /26).

Для первой из этих подсетей диапазон адресов будет: 172.16.20.129–172.16.20.190. Широковещательный адрес: 172.16.20.191.

Для второй подсети диапазон будет: 172.16.20.193–172.16.20.254. Широковещательный адрес будет: 172.16.20.255.

1.  Задана сеть 10.10.1.64/26. Для заданной сети определим префикс, маску, broadcast-адрес, число возможных подсетей, диапазон адресов узлов.

|     |     |
| --- | --- |
| Характеристика | Значение |
| Адрес сети<br><br>Префикс маски<br><br>Маска<br><br>Broadcast-адрес<br><br>Адрес сети в двоичной форме<br><br>Маска в двоичной форме<br><br>Число возможных подсетей<br><br>Диапазон адресов узлов | 10.10.1.64/26<br><br>/26<br><br>255.255.255.192<br><br>10.10.1.127/26<br><br>00001010.00001010.00000001.01000000<br><br>11111111.11111111.11111111.11000000<br><br>2^6 = 64<br><br>10.10.1.65- 10.10.1.126 |

Выделим в этой сети подсеть на 30 узлов. Запишем характеристики для выделенной подсети:

Для подсети на 30 узлов потребуется 30 + 2 = 32 адреса, следовательно маска подсети будет: 255.255.255.224 (префикс маски /27). Диапазон адресов: 10.10.1.65 - 10.10.1.94. IP-адрес подсети: 10.10.1.64. Широковещательный адрес: 10.10.1.95.

1.  Задана сеть 10.10.1.0/26. Для этой сети определите префикс, маску, broadcast адрес, число возможных подсетей, диапазон адресов узлов.

|     |     |
| --- | --- |
| Характеристика | Значение |
| Адрес сети<br><br>Префикс маски<br><br>Маска<br><br>Broadcast-адрес<br><br>Адрес сети в двоичной форме<br><br>Маска в двоичной форме<br><br>Число возможных подсетей<br><br>Диапазон адресов узлов | 10.10.1.0/26<br><br>/26<br><br>255.255.255.192<br><br>10.10.1.63/26<br><br>00001010.00001010.00000001.00000000<br><br>11111111.11111111.11111111.11000000<br><br>2^6 = 64<br><br>10.10.1.1- 10.10.1.62 |

Выделите в этой сети подсеть на 14 узлов. Запишите характеристики для выделенной подсети.

Для подсети на 14 узлов потребуется 14 + 2 = 16 адресов, следовательно маска подсети будет: 255.255.255.240 (префикс маски /28). Диапазон адресов: 10.10.1.1-10.10.1.14. IP-адрес подсети: 10.10.1.0. Широковещательный адрес: 10.10.1.15.

**Разбиение IPv6-сети на подсети**

1.  Задана сеть 2001:db8:c0de::/48. Охарактеризуем адрес, определим маску, префикс, диапазон адресов для узлов сети (краевые значения).

Адрес 2001:db8:c0de::/48 – адрес локальной подсети. Первые 48 бит фиксированы, далее 16 бит – подсеть, остальные 64 бита -идентификатор конкретного интерфейса узла подсети.

|     |     |
| --- | --- |
| Характеристика | Значение |
| Адрес сети<br><br>Длина префикса<br><br>Префикс<br><br>Маска<br><br>Диапазон адресов узлов | 2001:db8:c0de::/48<br><br>48<br><br>2001:db8:c0de<br><br>ffff:ffff:ffff:0000:0000:0000:0000:0000<br><br>0021:0db8:0cde:0000:0000:0000:0000:0000-<br><br>0021:0db8:0cde:ffff:ffff:ffff:ffff:ffff |

Разобьем сеть на 2 подсети двумя способами — с использованием идентификатора подсети и с использованием идентификатора интерфейса.

С использованием идентификатора подсети:

Идентификатора подсети – это то, что следует за префиксом глобальной маршрутизации (48 бит). Рассчитаем его и получим, что для сети 2001:db8:c0de::/48 можно выделить следующие подсети:

2001:db8:c0de:0002::/64

2001:db8:c0de:0003::/64

С использованием идентификатора интерфейса:

Создадим подсеть на границе полубайта (4 бита или одна шестнадцатеричная цифра). Например, префикс подсети /64 расширяется на четыре бита (или один полубайт) до подсети /68, что позволяет уменьшить размер идентификатора интерфейса на 4 бита (с 64 до 60).

Тогда можно выделить, например, такие подсети:

2001: 0db8: c0de:0000:1000/68

2001: 0db8: c0de:0000:2000/68

1.  Задана сеть 2a02:6b8::/64. Охарактеризуем адрес, определим маску, префикс, диапазон адресов для узлов сети (краевые значения).

Адрес 2a02:6b8::/64 – адрес локальной связи. Первые 64 бита – фиксированы, остальные 64 - идентифицируют конкретный интерфейс узла.

|     |     |
| --- | --- |
| Характеристика | Значение |
| Адрес сети<br><br>Длина префикса<br><br>Префикс<br><br>Маска<br><br>Диапазон адресов узлов | 2a02:6b8::/64<br><br>/64<br><br>2a02:6b8:0:0<br><br>ffff:ffff:ffff:ffff:0000:0000:0000:0000<br><br>02a2:06b8:0000:0000:0000:0000:0000:0000-02a2:06b8:0000:0000:ffff:ffff:ffff:ffff |

Разобьем сеть на 2 подсети.

С использованием идентификатора интерфейса:

Создадим подсеть на границе полубайта (4 бита или одна шестнадцатеричная цифра). Например, префикс подсети /64 расширяется на четыре бита (или один полубайт) до подсети /68, что позволяет уменьшить размер идентификатора интерфейса на 4 бита (с 64 до 60).

Тогда можно выделить, например, такие подсети:

2a02:6b8::/68

2a02:6b8:0:0:1000::/68

**№2**

Для начала реализуем в GNS3 топологию сети данную в примере.

Рисунок 1. Топология сети с двумя локальными подсетями

Далее настроим IPv4-адресацию на устройствах первой подсети и проверим подключение между устройствами этой подсети.

Заходим в терминал PC1 и присвоим ему адрес 172.16.20.10/25 со шлюзом 172.16.20.1:

Рисунок 2. Настройка IPv4-адресации для PC1

Заходим в терминал PC2 и присвоим ему адрес 172.16.20.138/25 со шлюзом 172.16.20.129:

Рисунок 3. Настройка IPv4-адресации для PC2

Заходим в терминал Server и присвоим ему адрес 64.100.1.10/24 со шлюзом 64.100.1.1:

Рисунок 4. Настройка IPv4-адресации для Server

Далее настроим IPv4-адресацию для интерфейсов локальной сети маршрутизатора VyOS msk-dmbelicheva-gw-01:

Рисунок 5. Присвоение хостнейма для маршрутизатора VyOS msk-dmbelicheva-gw-01

Рисунок 6. Настройка IPv4-адресации для маршрутизатора VyOS msk-dmbelicheva-gw-01

Сохраним изменения и покажем, что IPv4-адреса присвоились:

Рисунок 7. Результат настройки IPv4-адресации

Проверим подключение с помощью команд ping и trace. Узлы PC1 и PC2 должны успешно отправлять эхо-запросы друг другу и на сервер с двойным стеком (Dual Stack Server).

Сначала отправим эхо-запросы с PC1 на PC2 и на Server. Пакеты получены назад. Значит все успешно подключилось.

Рисунок 8. Проверка подключения

Дальше отправим эхо-запросы с PC2 на PC1 и на Server. Пакеты получены назад. Значит все успешно подключилось.

Рисунок 9. Проверка подключения

Аналогично настройке IPv4-адресации настроим IPv6-адресацию сначала для интерфейсов узлов PC3, PC4, Server:

Рисунок 10. Настройка IPv6-адресации для PC1

Рисунок 11. Настройка IPv6-адресации для PC2

Рисунок 12. Настройка IPv6-адресации для Server

Потом настроим IPv6-адресацию для интерфейсов локальной сети маршрутизатора VyOS msk-dmbelicheva-gw-02:

Рисунок 13. Настройка IPv6-адресации для маршрутизатора VyOS msk-dmbelicheva-gw-02

Сохраним изменения и покажем, что IPv6-адреса присвоились:

Рисунок 14. Настройка IPv6-адресации для маршрутизатора VyOS msk-dmbelicheva-gw-02

Рисунок 15. Результат настройки IPv6-адресации

Проверим подключение с помощью команд ping и trace. Узлы PC3 и PC4 должны успешно отправлять эхо-запросы друг другу и на сервер с двойным стеком (Dual Stack Server).

Сначала отправим эхо-запросы с PC3 на PC4 и на Server. Пакеты получены назад. Значит все успешно подключилось.

Рисунок 16. Проверка подключения

Дальше отправим эхо-запросы с PC4 на PC3 и на Server. Пакеты получены назад. Значит все успешно подключилось.

Рисунок 17. Проверка подключения

Убедимся, что устройства из подсети IPv4 не доступны для устройств из подсети IPv6 и наоборот. Только сервер двойного стека может обращаться к устройствам обеих подсетей.

Из терминала PC4 проверяем что PC1 недоступен:

Рисунок 18. Пингование PC1

Из терминал PC1 проверяем что PC3 недоступен:

Рисунок 19. Пингование PC3

Посмотрим захваченный на соединении сервера двойного стека адресации с коммутатором трафик ARP, ICMP, ICMPv6.

Рисунок 20. Захваченный трафик по протоколу ARP

На физическом уровне может узнать, например, длину кадра. На канальной уровне можем узнать mac-адреса источника и получателя (в этом случае mac-адрес получателя локально администрируемый и широковещательный, а у источника – глобально уникальный и индивидуальный). Далее идет протокол ARP, где мы видим, что подключение Ethernet, и используется IPv4-адрес. Для mac-адреса выделено 6 байт, для IPv4-адреса – 4 байта.

Рисунок 21. Захваченный трафик по протоколу ICMP

Информация по физическому и канальному уровням здесь аналогична в случае протокола ARP. Здесь у нас добавляется сетевой уровень с протоколом IPv4, откуда мы можем узнать IP-адреса источника (172.16.20.138 – PC2) и получателя (64.100.1.10 - Server). И дальше собственно идет протокол ICMP.

Рисунок 22. Захваченный трафик по протоколу ICMPv6

Здесь все аналогично случаю с протоколом ICMP только теперь на сетевом уровне идет протокол IPv6, а после протокол ICMPv6.

**№3**

Предполагается, что маршрутизатор разбивает сеть на две подсети с адресами IPv4 и IPv6:

– подсеть 1: 10.10.1.96/27 (длина префикса 27 => маска подсети будет: 255.255.255.224, широковещательный адрес: 10.10.1.127, диапазон: 10.10.1.97-10.10.1.126); 2001:DB8:1:1::/64(диапазон: 2001: db8:1:1:0:0:0:0-2001: db8: 1:1:ffff:ffff: ffff:fffff);

– подсеть 2: 10.10.1.16/28 (длина префикса 28 => маска подсети будет: 255.255.255.240, широковещательный адрес: 10.10.1.31, диапазон адресов: 10.10.1.17- 10.10.1.30); 2001:DB8:1:4::/64(диапазон: 2001: db8:1:4:0:0:0:0-2001: db8:1:4:ffff:ffff: ffff:fffff).

Нужно предложить вариант таблицы адресации для заданной топологии и адресного пространства, причём для интерфейсов маршрутизатора выбрать наименьший адрес в подсети:

Таблица 1. Таблица адресации

|     |     |     |     |     |
| --- | --- | --- | --- | --- |
| Устройство | Интерфейс | IPv4-адрес | IPv6-адрес | Шлюз по умолчанию |
| PC1<br><br>PC2<br><br>gw-01<br><br>gw-01 | NIC<br><br>NIC<br><br>eth 0<br><br>eth 1 | 10.10.1.99/27<br><br>10.10.1.18/28<br><br>10.10.1.97/27<br><br>10.10.1.17/28 | 2001:db8:1:1::a/64<br><br>2001:db8:1:4::a/64<br><br>2001:db8:1:1::1/64<br><br>2001:db8:1:4::1/64 | 10.10.1.97/gw-01<br><br>10.10.1.17/gw-01 |

Реализация топологии сети в GNS3:

Рисунок 23. Топология сети с двумя локальными подсетями

Настроим IP-адресацию на маршрутизаторе VyOS и оконечных устройствах, причём на интерфейсах маршрутизатора установить наименьший адрес в подсети

Рисунок 24. Настройка IPv4-адресации PC1

Рисунок 25. Настройка IPv6-адресации PC1

Рисунок 26. Настройка IPv4-адресации PC2

Рисунок 27. Настройка IPv6-адресации PC2

Рисунок 28. Настройка IPv4-адресации маршрутизатора

Рисунок 29. Настройка IPv6-адресации маршрутизатора

Рисунок 30. Результат настройки адресации маршрутизатора

Проверим подключение между устройствами подсети с помощью команд ping и trace. Увидим, что пакеты получены назад, значит подключение успешно.

Рисунок 31. Проверка подключения

Рисунок 32. Проверка подключения

**Выводы:**

В процессе выполнения данной лабораторной работы я изучил принципы распределения и настройки адресного пространства на устройствах сети.